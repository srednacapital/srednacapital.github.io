<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sredna Capital | Wealth Simulator</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        sredna: {
                            DEFAULT: '#004225', // British Racing Green
                            slate: '#36454F',   // Charcoal Slate
                            light: '#F9FAFB',   // Background
                            accent: '#E8F5E9',  // Very light green for highlights
                            border: '#00422520' // Subtle green border
                        }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 66, 37, 0.05), 0 2px 4px -1px rgba(0, 66, 37, 0.03)'
                    }
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F9FAFB; color: #36454F; }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        
        /* Custom Range Slider */
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #004225; cursor: pointer; margin-top: -6px; box-shadow: 0 0 0 4px #E8F5E9; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #E5E7EB; border-radius: 2px; }
        
        /* Main Layout Cards */
        .main-card { @apply bg-white rounded-xl shadow-card border border-sredna-border overflow-hidden; }
        
        /* Data Cards (Equal Height Logic) */
        .clean-card { @apply bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden h-full flex flex-col; }
        .clean-card-header { @apply flex items-center gap-3 px-6 py-4 border-b border-gray-100 font-bold text-sredna-slate uppercase tracking-wider text-xs bg-gray-50/50; }
        .clean-card-body { @apply p-6 text-sm flex-grow; }
        
        /* Metric Rows */
        .metric-row { @apply flex justify-between items-center py-3 border-b border-gray-50 last:border-0; }
        .metric-label { @apply text-gray-600 font-medium; }
        .metric-value { @apply font-bold text-sredna-slate; }

        /* Table Styling */
        .perf-table { width: 100%; }
        .perf-table th { @apply text-left text-xs font-semibold text-sredna-slate uppercase tracking-wider py-3 px-4 border-b border-gray-100 bg-gray-50; }
        .perf-table td { @apply py-2 px-4 text-sm border-b border-gray-50; }
        .perf-table tr:last-child td { border-bottom: none; }
    </style>
</head>
<body>

    <nav class="bg-white border-b border-gray-100 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center gap-3">
                    <img src="assets/Logo.png" alt="Sredna Capital" class="h-12 w-auto" onerror="this.style.display='none'; document.getElementById('alt-logo').style.display='block';">
                    <span id="alt-logo" class="hidden text-2xl font-serif font-bold text-sredna tracking-wide">Sredna Capital</span>
                </div>
                <div class="hidden md:flex space-x-8 text-sm font-medium text-gray-500">
                    <a href="#philosophy" class="hover:text-sredna transition">Philosophy</a>
                    <a href="#performance" class="hover:text-sredna transition">Performance</a>
                    <a href="#simulator" class="hover:text-sredna transition">Simulator</a>
                    <a href="#contact" class="px-4 py-2 bg-sredna text-white rounded-md hover:bg-opacity-90 transition shadow-sm">Contact IR</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="bg-white relative overflow-hidden">
        <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9IiMwMDQyMjUiIGZpbGwtb3BhY2l0eT0iMC4wNSIvPjwvc3ZnPg==')] bg-fixed"></div>
        <div class="max-w-7xl mx-auto px-4 py-24 md:py-32 text-center relative z-10">
            <h1 class="text-4xl md:text-6xl font-light tracking-tight text-sredna mb-6">
                Asymmetric Returns.<br/>
                <span class="font-semibold">Mathematical Precision.</span>
            </h1>
            <p class="max-w-2xl mx-auto text-xl text-gray-500 mb-10 leading-relaxed">
                A systematic capital appreciation vehicle designed for the accumulation phase of wealth. 
                Sredna Capital replaces emotional decision-making with statistical discipline.
            </p>
            <div class="flex justify-center gap-4">
                <a href="#simulator" class="px-8 py-3 bg-sredna text-white rounded-md font-medium hover:bg-opacity-90 transition inline-flex items-center shadow-lg shadow-sredna/20">
                  Launch Simulator
                </a>
             </div>
        </div>
    </div>

    <section id="philosophy" class="py-20 px-4 md:px-8 max-w-7xl mx-auto bg-sredna-light">
        <h2 class="text-3xl font-light text-sredna-slate mb-12 text-center tracking-tight">The Core Philosophy</h2>
        <div class="grid md:grid-cols-3 gap-8">
            <div class="bg-white p-8 rounded-xl border border-sredna-border shadow-card hover:shadow-md transition-shadow relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-2 h-full bg-sredna transform -translate-x-full group-hover:translate-x-0 transition-transform"></div>
                <h3 class="text-xl font-medium mb-3 text-sredna">Regime Filtering</h3>
                <p class="text-gray-500 leading-relaxed">Markets exhibit distinct regimes. Our algorithms filter out low-probability environments, participating only in confirmed trends.</p>
            </div>
            <div class="bg-white p-8 rounded-xl border border-sredna-border shadow-card hover:shadow-md transition-shadow relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-2 h-full bg-sredna transform -translate-x-full group-hover:translate-x-0 transition-transform"></div>
                <h3 class="text-xl font-medium mb-3 text-sredna">Dynamic Exposure</h3>
                <p class="text-gray-500 leading-relaxed">When market health metrics are optimal, the strategy intelligently amplifies exposure to high-conviction trends.</p>
            </div>
            <div class="bg-white p-8 rounded-xl border border-sredna-border shadow-card hover:shadow-md transition-shadow relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-2 h-full bg-sredna transform -translate-x-full group-hover:translate-x-0 transition-transform"></div>
                <h3 class="text-xl font-medium mb-3 text-sredna">Tail-Risk Defense</h3>
                <p class="text-gray-500 leading-relaxed">We execute an immediate rotation to cash when liquidation events are detected, bypassing the 'falling knife' effect.</p>
            </div>
        </div>
    </section>

    <section id="simulator" class="py-20 px-4 md:px-8 max-w-7xl mx-auto bg-white">
        <h2 class="text-3xl font-light text-sredna-slate mb-12 text-center tracking-tight">Interactive Wealth Simulator</h2>
        
        <div class="main-card flex flex-col md:flex-row">
            <div class="w-full md:w-1/3 p-8 bg-sredna-light border-r border-sredna-border">
                <h3 class="text-lg font-semibold text-sredna mb-8 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.532 1.532 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>
                    Configuration
                </h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Initial Capital</label>
                        <div class="flex items-center bg-white border border-gray-200 rounded-md px-3 py-3 focus-within:border-sredna transition shadow-sm">
                            <span class="text-sredna font-semibold mr-2">$</span>
                            <input type="number" id="initialCapital" value="10000" class="bg-transparent w-full outline-none font-mono text-gray-700 font-medium">
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Monthly Contribution</label>
                        <div class="flex items-center bg-white border border-gray-200 rounded-md px-3 py-3 focus-within:border-sredna transition shadow-sm">
                            <span class="text-sredna font-semibold mr-2">$</span>
                            <input type="number" id="monthlyContribution" value="0" class="bg-transparent w-full outline-none font-mono text-gray-700 font-medium">
                        </div>
                    </div>

                    <div>
                         <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Time Horizon (<span id="yearDisplay" class="text-sredna">2016</span> - 2025)</label>
                        <div class="px-1">
                             <input type="range" id="startYear" min="2016" max="2025" value="2016">
                        </div>
                        <div class="flex justify-between text-[10px] text-gray-400 mt-2 font-mono">
                            <span>2016</span><span>'18</span><span>'20</span><span>'22</span><span>'24</span><span>2025</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-card border border-sredna-border mt-8 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-1 bg-sredna"></div>
                    <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">Projected Total Wealth</h4>
                    <div class="text-3xl font-bold text-sredna font-mono tracking-tight" id="finalStratValue">$0</div>
                    <div class="text-sm text-gray-500 font-medium mt-1">Benchmark: <span id="finalSpyValue">$0</span></div>
                    
                    <div class="mt-6 grid grid-cols-2 gap-4 pt-4 border-t border-gray-100">
                        <div>
                            <span class="block text-[10px] text-gray-400 uppercase tracking-wider mb-1 leading-tight">Sredna Capital's Portfolio CAGR</span>
                            <span class="text-xl font-bold text-sredna" id="cagrStrat">0%</span>
                        </div>
                        <div>
                            <span class="block text-[10px] text-gray-400 uppercase tracking-wider mb-1 leading-tight">SPY CAGR</span>
                            <span class="text-xl font-bold text-gray-500" id="cagrSpy">0%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="w-full md:w-2/3 p-8 flex flex-col">
                <div class="flex-grow relative min-h-[400px]">
                    <canvas id="wealthChart"></canvas>
                </div>
                <p class="text-xs text-gray-400 italic text-center border-t pt-4 mt-4">
                    *Gross returns estimates based on historical data visualization. Not indicative of future results.
                </p>
            </div>
        </div>
    </section>

    <section id="performance" class="py-20 px-4 md:px-8 max-w-7xl mx-auto bg-sredna-light">
        <h2 class="text-3xl font-light text-sredna-slate mb-12 text-center tracking-tight">Institutional Performance Analysis</h2>
        
        <div class="space-y-12">
            
            <div class="clean-card h-auto block">
                <div class="clean-card-header">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-sredna" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                    Annual Returns & Drawdown Profile
                </div>
                <div class="clean-card-body">
                    <div class="h-80 relative mb-10 w-full">
                        <canvas id="annualPerfChart"></canvas>
                    </div>
                    
                    <h4 class="text-xs font-bold text-sredna-slate uppercase tracking-wider mb-4 border-b pb-2">Max Drawdown Comparison</h4>
                    <div class="overflow-x-auto border rounded-lg">
                        <table class="perf-table min-w-full">
                            <thead>
                                <tr>
                                    <th>Year</th>
                                    <th class="text-right">Sredna Capital's Portfolio</th>
                                    <th class="text-right">SPY MaxDD</th>
                                </tr>
                            </thead>
                            <tbody class="font-mono">
                                <tr><td class="text-left font-sans text-gray-600">2016</td><td class="text-right text-red-500">-6.56%</td><td class="text-right text-gray-500">-1.28%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2017</td><td class="text-right text-red-500">-5.69%</td><td class="text-right text-gray-500">-2.61%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2018</td><td class="text-right text-red-500">-16.48%</td><td class="text-right text-red-500">-19.35%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2019</td><td class="text-right text-red-500">-16.98%</td><td class="text-right text-gray-500">-6.62%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2020</td><td class="text-right text-red-500">-23.98%</td><td class="text-right text-red-500">-33.72%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2021</td><td class="text-right text-red-500">-14.44%</td><td class="text-right text-gray-500">-5.11%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2022</td><td class="text-right text-red-500">-9.35%</td><td class="text-right text-red-500">-24.50%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2023</td><td class="text-right text-red-500">-15.41%</td><td class="text-right text-gray-500">-9.97%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2024</td><td class="text-right text-red-500">-18.16%</td><td class="text-right text-gray-500">-8.41%</td></tr>
                                <tr><td class="text-left font-sans text-gray-600">2025</td><td class="text-right text-red-500">-9.42%</td><td class="text-right text-red-500">-18.76%</td></tr>
                                <tr class="bg-sredna-accent/30 font-bold">
                                    <td class="text-left font-sans">AVERAGE</td>
                                    <td class="text-right text-red-600">-12.90%</td>
                                    <td class="text-right text-gray-600">-12.08%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 items-stretch">
                
                <div class="clean-card">
                    <div class="clean-card-header">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-sredna" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        Institutional Risk Profile (Live Data)
                    </div>
                    <div class="clean-card-body">
                        <div class="flex justify-end mb-4 pb-2 border-b border-gray-50 text-[10px] font-bold text-gray-400 uppercase tracking-wider">
                            <div class="w-32 text-right">Sredna Capital</div>
                            <div class="w-24 text-right">SPY</div>
                        </div>

                        <div class="metric-row">
                            <span class="metric-label">CAGR (Annual)</span>
                            <div class="flex justify-end">
                                <div class="w-32 text-right metric-value text-sredna">44.53%</div>
                                <div class="w-24 text-right metric-value text-gray-600">15.49%</div>
                            </div>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Volatility</span>
                            <div class="flex justify-end">
                                <div class="w-32 text-right metric-value text-gray-600">24.93%</div>
                                <div class="w-24 text-right metric-value text-gray-600">18.33%</div>
                            </div>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Sharpe Ratio</span>
                            <div class="flex justify-end">
                                <div class="w-32 text-right metric-value text-sredna">1.47</div>
                                <div class="w-24 text-right metric-value text-gray-600">0.69</div>
                            </div>
                        </div>
                        <div class="metric-row">
                            <span class="metric-label">Max Drawdown</span>
                            <div class="flex justify-end">
                                <div class="w-32 text-right metric-value text-red-500">-23.98%</div>
                                <div class="w-24 text-right metric-value text-red-500">-33.72%</div>
                            </div>
                        </div>
                        <div class="metric-row bg-sredna-accent/30 mt-4 px-2 -mx-2 rounded">
                            <span class="metric-label font-bold text-sredna-slate">Alpha (Excess)</span>
                            <div class="flex justify-end">
                                <div class="w-32 text-right metric-value text-sredna">+34.16%</div>
                                <div class="w-24 text-right metric-value text-gray-600">0.00%</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="clean-card">
                    <div class="clean-card-header">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-sredna" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                        5-Year Risk & Return Forecast (N=10,000)
                    </div>
                    <div class="clean-card-body">
                         <div class="metric-row">
                            <span class="metric-label">Median Expected Return</span>
                            <span class="metric-value text-lg text-sredna">530.84%</span>
                        </div>
                         <div class="metric-row">
                            <span class="metric-label">Bull Case (Top 10%)</span>
                            <span class="metric-value text-sredna text-opacity-80">1182.84%</span>
                        </div>
                         <div class="metric-row">
                            <span class="metric-label">Bear Case (Bottom 10%)</span>
                            <span class="metric-value text-gray-600">211.36%</span>
                        </div>
                        <div class="h-px bg-gray-100 my-4"></div>
                         <div class="metric-row">
                            <span class="metric-label">Probability of Loss</span>
                            <span class="metric-value text-sredna">0.00%</span>
                        </div>
                         <div class="metric-row">
                            <span class="metric-label">Typical Drawdown Pain</span>
                            <span class="metric-value text-red-500">-25.01%</span>
                        </div>
                         <div class="metric-row mt-4">
                            <span class="metric-label font-bold text-red-600 flex items-center gap-1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                                Catastrophic Risk (5%)
                            </span>
                            <span class="metric-value text-red-600">-39.46% MaxDD</span>
                        </div>
                    </div>
                </div>

            </div>

            <p class="text-xs text-gray-400 italic text-center mt-8">
                *All performance data, charts, and projections presented in this section represent gross returns estimates based on historical data and probabilistic simulations. They do not reflect fees or transaction costs. Past performance is not indicative of future results.
            </p>

        </div>
    </section>

    <footer id="contact" class="bg-sredna-slate text-white py-16 relative">
        <div class="max-w-7xl mx-auto px-4 md:px-8 text-center md:text-left">
            <div class="grid md:grid-cols-2 gap-12 mb-12">
                <div>
                    <img src="assets/Logo2.png" alt="Sredna Capital" class="h-10 mb-6 brightness-0 invert mx-auto md:mx-0" onerror="this.style.display='none'; document.getElementById('alt-footer-logo').style.display='block';">
                    <h4 id="alt-footer-logo" class="hidden text-2xl font-serif font-bold mb-4">Sredna Capital</h4>
                    
                    <p class="text-gray-400 max-w-sm mx-auto md:mx-0 leading-relaxed">To provide sophisticated investors with a vehicle for aggressive wealth accumulation that does not require them to weather the volatility of unhedged equity markets.</p>
                </div>
                <div class="text-center md:text-right">
                    <h4 class="font-bold mb-4 text-white uppercase tracking-wider">Contact</h4>
                    <p class="text-gray-400 font-medium">ir@srednacapital.com</p>
                    <p class="text-gray-400">Plovdiv, Bulgaria</p>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-8 text-[11px] text-gray-500 space-y-4 text-justify leading-relaxed">
                <p><strong>IMPORTANT DISCLAIMER:</strong> This website is for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation for any security, nor does it constitute an offer to provide investment advisory or other services by Sredna Capital Management.</p>
                <p>PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS. All performance data presented on this site, including charts, tables, and simulators, represents <strong>gross returns</strong> unless otherwise noted. Gross returns do not reflect the deduction of investment advisory fees, transaction costs, or other expenses that a client would have paid, which would reduce return. The "Sredna Ultimate Portfolio" is a theoretical strategy model. The "Interactive Wealth Simulator" utilizes historical backtested data to project hypothetical outcomes. No representation is being made that any account will or is likely to achieve profits or losses similar to those shown.</p>
                <p>&copy; 2026 Sredna Capital Management. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global Chart Defaults
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#6B7280';

        // --- 1. DATA GENERATION (Simulator & Bar Chart) ---
        // Data matching your Annual Performance image (2016 - 2025)
        const annualReturns = [
            { year: 2016, s: 0.1415, b: 0.0770 }, 
            { year: 2017, s: 0.6673, b: 0.2078 }, 
            { year: 2018, s: 0.1705, b: -0.0525 },
            { year: 2019, s: 0.2413, b: 0.3109 }, 
            { year: 2020, s: 0.5857, b: 0.1724 }, 
            { year: 2021, s: 0.3897, b: 0.3051 },
            { year: 2022, s: -0.0320, b: -0.1865 }, 
            { year: 2023, s: 0.2622, b: 0.2671 }, 
            { year: 2024, s: 0.5285, b: 0.2559 },
            { year: 2025, s: 0.9863, b: 0.1801 }
        ];

        function generateRawData() {
            const data = [];
            let strategyVal = 10000;
            let spyVal = 10000;
            annualReturns.forEach((ret) => {
                for(let m=0; m<12; m++) {
                    const monthlyStrat = Math.pow(1 + ret.s, 1/12) - 1;
                    const monthlySpy = Math.pow(1 + ret.b, 1/12) - 1;
                    strategyVal = strategyVal * (1 + monthlyStrat);
                    spyVal = spyVal * (1 + monthlySpy);
                    data.push({
                        date: `${ret.year}-${String(m+1).padStart(2, '0')}`,
                        year: ret.year,
                        Strategy: strategyVal,
                        Benchmark: spyVal
                    });
                }
            });
            return data;
        }

        const RAW_DATA = generateRawData();

        // --- 2. WEALTH SIMULATOR CHART SETUP ---
        const ctxWealth = document.getElementById('wealthChart').getContext('2d');
        let gradient = ctxWealth.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, 'rgba(0, 66, 37, 0.15)');
        gradient.addColorStop(1, 'rgba(0, 66, 37, 0.0)');

        const wealthChart = new Chart(ctxWealth, {
            type: 'line',
            data: {
                labels: [],
                datasets: [
                    {
                        label: "Sredna Capital's Portfolio (Gross)",
                        data: [],
                        borderColor: '#004225',
                        backgroundColor: gradient,
                        fill: true,
                        borderWidth: 2.5,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        pointHoverBackgroundColor: '#004225',
                        pointHoverBorderColor: '#fff',
                        pointHoverBorderWidth: 2,
                        tension: 0.2
                    },
                    {
                        label: 'S&P 500 Benchmark (Gross)',
                        data: [],
                        borderColor: '#36454F',
                        borderWidth: 2,
                        borderDash: [4, 4],
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        tension: 0.2
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: { position: 'top', align: 'end', labels: { boxWidth: 12, usePointStyle: true, font: { weight: '500' } } },
                    tooltip: {
                        backgroundColor: 'rgba(255, 255, 255, 0.98)',
                        titleColor: '#36454F',
                        bodyColor: '#36454F',
                        borderColor: '#E5E7EB',
                        borderWidth: 1,
                        padding: 12,
                        boxPadding: 6,
                        usePointStyle: true,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) { label += ': '; }
                                if (context.parsed.y !== null) { label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(context.parsed.y); }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: { grid: { display: false }, ticks: { maxTicksLimit: 6, font: { size: 11 } } },
                    y: { position: 'right', grid: { color: '#F3F4F6', drawBorder: false }, ticks: { font: { size: 11, family: 'Roboto Mono' }, callback: function(value) { return '$' + (value/1000).toFixed(0) + 'k'; } } }
                }
            }
        });

        // --- 3. ANNUAL PERFORMANCE BAR CHART SETUP ---
        const ctxBar = document.getElementById('annualPerfChart').getContext('2d');
        const annualPerfChart = new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: annualReturns.map(d => d.year),
                datasets: [
                    {
                        label: "Sredna Capital's Portfolio",
                        data: annualReturns.map(d => d.s * 100),
                        backgroundColor: '#004225',
                        barPercentage: 0.6,
                        categoryPercentage: 0.8
                    },
                    {
                        label: 'SPY Return',
                        data: annualReturns.map(d => d.b * 100),
                        backgroundColor: '#36454F',
                        barPercentage: 0.6,
                        categoryPercentage: 0.8
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top', align: 'end', labels: { boxWidth: 12, usePointStyle: true } },
                    tooltip: {
                        backgroundColor: 'rgba(255, 255, 255, 0.98)',
                        titleColor: '#36454F',
                        bodyColor: '#36454F',
                        borderColor: '#E5E7EB',
                        borderWidth: 1,
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) { label += ': '; }
                                if (context.parsed.y !== null) { label += context.parsed.y.toFixed(2) + '%'; }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: { grid: { display: false }, ticks: { font: { size: 11 } } },
                    y: { 
                        grid: { color: '#F3F4F6', drawBorder: false }, 
                        ticks: { font: { size: 11, family: 'Roboto Mono' }, callback: function(value) { return value + '%'; } } 
                    }
                }
            }
        });


        // --- 4. SIMULATION LOGIC ---
        function updateSimulation() {
            const initialCapital = parseFloat(document.getElementById('initialCapital').value) || 0;
            const monthlyContrib = parseFloat(document.getElementById('monthlyContribution').value) || 0;
            const startYear = parseInt(document.getElementById('startYear').value);

            document.getElementById('yearDisplay').innerText = startYear;

            const startIndex = RAW_DATA.findIndex(d => d.year === startYear);
            const slicedData = RAW_DATA.slice(startIndex === -1 ? 0 : startIndex);

            let currentStrat = initialCapital;
            let currentSpy = initialCapital;
            
            const chartLabels = [];
            const stratData = [];
            const spyData = [];

            slicedData.forEach((point, i) => {
                const prevStrat = i === 0 ? slicedData[0].Strategy : slicedData[i-1].Strategy;
                const prevSpy = i === 0 ? slicedData[0].Benchmark : slicedData[i-1].Benchmark;
                
                const stratGrowth = i === 0 ? 0 : (point.Strategy - prevStrat) / prevStrat;
                const spyGrowth = i === 0 ? 0 : (point.Benchmark - prevSpy) / prevSpy;

                currentStrat = currentStrat * (1 + stratGrowth) + monthlyContrib;
                currentSpy = currentSpy * (1 + spyGrowth) + monthlyContrib;

                chartLabels.push(point.date);
                stratData.push(currentStrat);
                spyData.push(currentSpy);
            });

            wealthChart.data.labels = chartLabels;
            wealthChart.data.datasets[0].data = stratData;
            wealthChart.data.datasets[1].data = spyData;
            wealthChart.update();

            const finalStrat = stratData[stratData.length - 1];
            const finalSpy = spyData[spyData.length - 1];
            const years = slicedData.length / 12;
            const cagrStrat = (Math.pow(finalStrat / initialCapital, 1 / years) - 1) * 100;
            const cagrSpy = (Math.pow(finalSpy / initialCapital, 1 / years) - 1) * 100;

            document.getElementById('finalStratValue').innerText = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(finalStrat);
            document.getElementById('finalSpyValue').innerText = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(finalSpy);
            document.getElementById('cagrStrat').innerText = cagrStrat.toFixed(1) + '%';
            document.getElementById('cagrSpy').innerText = cagrSpy.toFixed(1) + '%';
        }

        document.getElementById('initialCapital').addEventListener('input', updateSimulation);
        document.getElementById('monthlyContribution').addEventListener('input', updateSimulation);
        document.getElementById('startYear').addEventListener('input', updateSimulation);

        updateSimulation();
    </script>
</body>
</html>